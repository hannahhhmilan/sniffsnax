<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  
  <!-- Primary Meta Tags -->
  <title>SniffSnax - Can My Dog Eat This?</title>
  <meta name="title" content="SniffSnax - Can My Dog Eat This?">
  <meta name="description" content="Instant pet food safety checker. Find out if foods are safe, caution, or toxic for your dog.">
  
  <!-- PWA Meta Tags -->
  <meta name="theme-color" content="#3b82f6">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="SniffSnax">
  <meta name="mobile-web-app-capable" content="yes">
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  
  <!-- Favicon & Icons -->
  <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="icons/icon-16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="icons/icon-180.png">
  <link rel="apple-touch-icon" sizes="152x152" href="icons/icon-152.png">
  <link rel="apple-touch-icon" sizes="120x120" href="icons/icon-120.png">
  
  <!-- Open Graph / Social -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="SniffSnax - Can My Dog Eat This?">
  <meta property="og:description" content="Instant pet food safety checker for dogs. Safe, caution, or toxic - know before you feed.">
  <meta property="og:image" content="icons/og-image.png">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- React -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    /* Prevent pull-to-refresh on mobile */
    body {
      overscroll-behavior-y: contain;
    }
    
    /* iOS safe areas */
    @supports (padding: max(0px)) {
      .safe-area-inset-bottom {
        padding-bottom: max(0.5rem, env(safe-area-inset-bottom));
      }
    }
    
    /* Splash screen */
    #splash {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 0.3s ease-out;
    }
    
    #splash.hidden {
      opacity: 0;
      pointer-events: none;
    }
    
    #splash .logo {
      font-size: 4rem;
      animation: bounce 1s ease-in-out infinite;
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 4px;
    }
    
    ::-webkit-scrollbar-track {
      background: transparent;
    }
    
    ::-webkit-scrollbar-thumb {
      background: #cbd5e1;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <!-- Splash Screen -->
  <div id="splash">
    <div class="logo">üêï</div>
    <h1 class="text-2xl font-bold text-amber-800 mt-4">SniffSnax</h1>
    <p class="text-amber-600 mt-2">Loading...</p>
  </div>
  
  <!-- App Root -->
  <div id="root"></div>
  
  <!-- App Script -->
  <script type="text/babel" data-type="module">
    const { useState, useEffect, useMemo } = React;

    // Size-based portion multipliers
    const getPortionBySize = (basePortionText, weightKg) => {
      if (!weightKg) return basePortionText;
      
      let sizeLabel, multiplier;
      if (weightKg < 5) {
        sizeLabel = 'Tiny';
        multiplier = 0.25;
      } else if (weightKg < 10) {
        sizeLabel = 'Small';
        multiplier = 0.5;
      } else if (weightKg < 25) {
        sizeLabel = 'Medium';
        multiplier = 1;
      } else if (weightKg < 40) {
        sizeLabel = 'Large';
        multiplier = 1.5;
      } else {
        sizeLabel = 'Giant';
        multiplier = 2;
      }
      
      return { sizeLabel, multiplier, basePortionText };
    };

    // Dog size category helper
    const getDogSizeCategory = (weightKg) => {
      if (!weightKg) return null;
      if (weightKg < 5) return { label: 'Tiny', emoji: 'üêï', color: 'text-purple-600', bg: 'bg-purple-100' };
      if (weightKg < 10) return { label: 'Small', emoji: 'üêï', color: 'text-blue-600', bg: 'bg-blue-100' };
      if (weightKg < 25) return { label: 'Medium', emoji: 'üêï', color: 'text-green-600', bg: 'bg-green-100' };
      if (weightKg < 40) return { label: 'Large', emoji: 'ü¶Æ', color: 'text-orange-600', bg: 'bg-orange-100' };
      return { label: 'Giant', emoji: 'ü¶Æ', color: 'text-red-600', bg: 'bg-red-100' };
    };

    // Common dog breeds for quick selection
    const popularBreeds = [
      'Mixed Breed', 'Labrador Retriever', 'Golden Retriever', 'German Shepherd', 
      'Bulldog', 'Beagle', 'Poodle', 'Rottweiler', 'Yorkshire Terrier', 
      'Boxer', 'Dachshund', 'Shih Tzu', 'Siberian Husky', 'Chihuahua',
      'Pomeranian', 'French Bulldog', 'Corgi', 'Border Collie', 'Australian Shepherd',
      'Maltese', 'Pug', 'Cocker Spaniel', 'Pit Bull', 'Great Dane', 'Doberman'
    ];

    // Special considerations options
    const specialConsiderations = [
      { id: 'senior', label: 'Senior', emoji: 'üßì', description: 'Older dog with different nutritional needs', tip: 'Softer foods and smaller portions recommended' },
      { id: 'puppy', label: 'Puppy', emoji: 'üê∂', description: 'Still growing and developing', tip: 'Some foods not suitable until fully grown' },
      { id: 'pregnant', label: 'Pregnant / Nursing', emoji: 'ü§±', description: 'Expecting or feeding puppies', tip: 'Higher nutritional needs - consult vet for diet' },
      { id: 'diabetic', label: 'Diabetic', emoji: 'üíâ', description: 'Requires blood sugar management', tip: 'Avoid sugary foods, maintain consistent feeding schedule' },
      { id: 'allergies', label: 'Food Allergies', emoji: 'ü§ß', description: 'Sensitive to certain ingredients', tip: 'Introduce new foods slowly and one at a time' },
      { id: 'sensitive_stomach', label: 'Sensitive Stomach', emoji: 'ü´Ñ', description: 'Prone to digestive upset', tip: 'Stick to bland, easily digestible foods' },
      { id: 'weight_management', label: 'Weight Management', emoji: '‚öñÔ∏è', description: 'Needs portion control', tip: 'Choose low-calorie treats, measure portions carefully' },
      { id: 'kidney', label: 'Kidney Support', emoji: 'üíß', description: 'Requires kidney-friendly diet', tip: 'Avoid high-phosphorus and high-sodium foods' },
      { id: 'heart', label: 'Heart Support', emoji: '‚ù§Ô∏è', description: 'Needs heart-healthy diet', tip: 'Low sodium foods recommended' },
      { id: 'blind', label: 'Blind / Low Vision', emoji: 'üëÅÔ∏è', description: 'Limited or no sight', tip: 'Keep food bowl in consistent location' },
      { id: 'deaf', label: 'Deaf / Hard of Hearing', emoji: 'üëÇ', description: 'Limited or no hearing', tip: 'Use visual cues for feeding time' },
      { id: 'mobility', label: 'Limited Mobility', emoji: 'ü¶Æ', description: 'Difficulty moving around', tip: 'Elevated food bowls may help with comfort' },
    ];

    // Get food tips based on considerations
    const getFoodTipsForConsiderations = (considerations = [], foodStatus) => {
      const tips = [];
      
      if (considerations.includes('senior')) {
        if (foodStatus === 'safe') tips.push('For senior dogs: Consider softer preparation or smaller pieces');
        if (foodStatus === 'caution') tips.push('Extra caution for senior dogs - their systems are more sensitive');
      }
      
      if (considerations.includes('puppy')) {
        if (foodStatus === 'safe') tips.push('For puppies: Introduce new foods gradually');
        if (foodStatus === 'caution') tips.push('Not recommended for puppies - wait until fully grown');
      }
      
      if (considerations.includes('diabetic')) {
        tips.push('Check sugar content - diabetic dogs need consistent, low-sugar foods');
      }
      
      if (considerations.includes('sensitive_stomach')) {
        if (foodStatus === 'caution') tips.push('With a sensitive stomach, best to avoid this food');
        if (foodStatus === 'safe') tips.push('Introduce slowly to check for digestive tolerance');
      }
      
      if (considerations.includes('weight_management')) {
        tips.push('Remember to account for treat calories in daily intake');
      }
      
      if (considerations.includes('kidney')) {
        tips.push('Check phosphorus and protein levels - consult vet for kidney-safe options');
      }
      
      if (considerations.includes('heart')) {
        tips.push('Avoid high-sodium foods for heart health');
      }
      
      if (considerations.includes('allergies')) {
        tips.push('If this is a new food, introduce in tiny amounts first');
      }
      
      return tips;
    };

    // Food database with safety info
    const foodDatabase = [
      // ==================== SAFE FOODS ====================
      // Fruits
      { name: 'apple', status: 'safe', emoji: 'üçé', note: 'Remove seeds and core first. Great source of vitamins A and C.', portion: 'A few slices as a treat' },
      { name: 'apples', status: 'safe', emoji: 'üçé', note: 'Remove seeds and core first. Great source of vitamins A and C.', portion: 'A few slices as a treat' },
      { name: 'banana', status: 'safe', emoji: 'üçå', note: 'High in potassium and vitamins. Low in cholesterol and sodium.', portion: '1-2 small pieces' },
      { name: 'bananas', status: 'safe', emoji: 'üçå', note: 'High in potassium and vitamins. Low in cholesterol and sodium.', portion: '1-2 small pieces' },
      { name: 'blueberries', status: 'safe', emoji: 'ü´ê', note: 'Superfood! Rich in antioxidants and fiber.', portion: 'A small handful' },
      { name: 'blueberry', status: 'safe', emoji: 'ü´ê', note: 'Superfood! Rich in antioxidants and fiber.', portion: 'A small handful' },
      { name: 'watermelon', status: 'safe', emoji: 'üçâ', note: 'Remove seeds and rind. Hydrating and refreshing treat.', portion: 'A few seedless chunks' },
      { name: 'strawberry', status: 'safe', emoji: 'üçì', note: 'Fresh, no sugar added. Contains fiber and vitamin C.', portion: '1-2 berries' },
      { name: 'strawberries', status: 'safe', emoji: 'üçì', note: 'Fresh, no sugar added. Contains fiber and vitamin C.', portion: '1-2 berries' },
      { name: 'mango', status: 'safe', emoji: 'ü•≠', note: 'Remove pit and skin. Sweet treat rich in vitamins.', portion: 'A few small pieces' },
      { name: 'orange', status: 'safe', emoji: 'üçä', note: 'Remove peel and seeds. High in vitamin C.', portion: '1-2 segments only' },
      { name: 'oranges', status: 'safe', emoji: 'üçä', note: 'Remove peel and seeds. High in vitamin C.', portion: '1-2 segments only' },
      { name: 'pear', status: 'safe', emoji: 'üçê', note: 'Remove seeds and core. Good source of vitamins.', portion: 'A few slices' },
      { name: 'pears', status: 'safe', emoji: 'üçê', note: 'Remove seeds and core. Good source of vitamins.', portion: 'A few slices' },
      { name: 'cantaloupe', status: 'safe', emoji: 'üçà', note: 'Remove rind and seeds. High in vitamins A and C.', portion: 'A few small chunks' },
      { name: 'honeydew', status: 'safe', emoji: 'üçà', note: 'Remove rind and seeds. Hydrating and low calorie.', portion: 'A few small chunks' },
      { name: 'cranberries', status: 'safe', emoji: 'üî¥', note: 'Fresh or dried without added sugar. May help urinary health.', portion: 'Small handful' },
      { name: 'raspberries', status: 'safe', emoji: 'üî¥', note: 'Low in sugar, high in fiber. Contains trace xylitol but safe in small amounts.', portion: 'A few berries' },
      { name: 'blackberries', status: 'safe', emoji: 'ü´ê', note: 'Rich in antioxidants and vitamins. Low in calories.', portion: 'A few berries' },
      { name: 'papaya', status: 'safe', emoji: 'ü•≠', note: 'Remove seeds and skin. Contains enzymes that aid digestion.', portion: 'A few small pieces' },
      { name: 'kiwi', status: 'safe', emoji: 'ü•ù', note: 'Remove skin. High in vitamin C and fiber.', portion: 'A few small pieces' },
      
      // Vegetables
      { name: 'carrot', status: 'safe', emoji: 'ü•ï', note: 'Great for teeth! Low calorie and high in fiber and beta-carotene.', portion: 'Baby carrots or sliced' },
      { name: 'carrots', status: 'safe', emoji: 'ü•ï', note: 'Great for teeth! Low calorie and high in fiber and beta-carotene.', portion: 'Baby carrots or sliced' },
      { name: 'cucumber', status: 'safe', emoji: 'ü•í', note: 'Low calorie, hydrating snack. Great for overweight dogs.', portion: 'Sliced rounds' },
      { name: 'cucumbers', status: 'safe', emoji: 'ü•í', note: 'Low calorie, hydrating snack. Great for overweight dogs.', portion: 'Sliced rounds' },
      { name: 'green beans', status: 'safe', emoji: 'ü´õ', note: 'Plain, no seasoning. Low calorie and filling.', portion: 'Chopped as meal mixer' },
      { name: 'pumpkin', status: 'safe', emoji: 'üéÉ', note: 'Plain canned pumpkin aids digestion. Not pumpkin pie filling!', portion: '1-2 tablespoons' },
      { name: 'sweet potato', status: 'safe', emoji: 'üç†', note: 'Cooked and plain. Great source of dietary fiber.', portion: 'Small cubes as treats' },
      { name: 'sweet potatoes', status: 'safe', emoji: 'üç†', note: 'Cooked and plain. Great source of dietary fiber.', portion: 'Small cubes as treats' },
      { name: 'spinach', status: 'safe', emoji: 'ü•¨', note: 'Small amounts only due to oxalic acid. Best cooked.', portion: 'Occasional small amounts' },
      { name: 'celery', status: 'safe', emoji: 'ü•¨', note: 'Freshens breath! Cut into small pieces to prevent choking.', portion: 'Small chopped pieces' },
      { name: 'broccoli', status: 'safe', emoji: 'ü•¶', note: 'High in fiber and vitamin C. Only in small quantities.', portion: 'Small florets occasionally' },
      { name: 'cauliflower', status: 'safe', emoji: 'ü•¨', note: 'Safe in small amounts. Can cause gas if too much.', portion: 'Small pieces occasionally' },
      { name: 'zucchini', status: 'safe', emoji: 'ü•í', note: 'Low calorie, easy to digest. Great for weight management.', portion: 'Sliced or cubed pieces' },
      { name: 'lettuce', status: 'safe', emoji: 'ü•¨', note: 'Low calorie, mostly water. Romaine is most nutritious.', portion: 'Shredded as topper' },
      { name: 'peas', status: 'safe', emoji: 'üü¢', note: 'Fresh, frozen, or thawed. Good source of vitamins.', portion: 'Small handful' },
      { name: 'bell pepper', status: 'safe', emoji: 'ü´ë', note: 'Any color is safe. Remove seeds and stem. High in vitamins.', portion: 'A few slices' },
      { name: 'bell peppers', status: 'safe', emoji: 'ü´ë', note: 'Any color is safe. Remove seeds and stem. High in vitamins.', portion: 'A few slices' },
      
      // Proteins
      { name: 'chicken', status: 'safe', emoji: 'üçó', note: 'Cooked, unseasoned, boneless chicken is excellent protein.', portion: 'Shredded, as meal topper' },
      { name: 'turkey', status: 'safe', emoji: 'ü¶É', note: 'Cooked, unseasoned, no skin or bones. Great lean protein.', portion: 'Shredded pieces' },
      { name: 'beef', status: 'safe', emoji: 'ü•©', note: 'Cooked, lean, unseasoned. Good source of protein and iron.', portion: 'Small cooked pieces' },
      { name: 'salmon', status: 'safe', emoji: 'üêü', note: 'Cooked only! Great for coat health. Never raw.', portion: 'Small flaked portions' },
      { name: 'eggs', status: 'safe', emoji: 'ü•ö', note: 'Cooked eggs are a great protein source. Avoid raw.', portion: '1 egg occasionally' },
      { name: 'egg', status: 'safe', emoji: 'ü•ö', note: 'Cooked eggs are a great protein source. Avoid raw.', portion: '1 egg occasionally' },
      
      // Grains & Others
      { name: 'rice', status: 'safe', emoji: 'üçö', note: 'Plain cooked rice is gentle on stomachs. Good for upset tummies.', portion: 'Mixed with regular food' },
      { name: 'oatmeal', status: 'safe', emoji: 'ü•£', note: 'Plain, cooked oatmeal. Good fiber source. No sugar or flavoring.', portion: '1-2 tablespoons' },
      { name: 'peanut butter', status: 'safe', emoji: 'ü•ú', note: 'Check for xylitol first! Plain, unsalted is best.', portion: '1 tablespoon max' },
      { name: 'quinoa', status: 'safe', emoji: 'ü•ó', note: 'Cooked and plain. Complete protein source.', portion: 'Small amount as mixer' },
      { name: 'pasta', status: 'safe', emoji: 'üçù', note: 'Plain cooked pasta. No sauce or seasonings. Low nutritional value.', portion: 'Small amount occasionally' },
      
      // ==================== CAUTION FOODS ====================
      { name: 'cheese', status: 'caution', emoji: 'üßÄ', note: 'Some dogs are lactose intolerant. Use sparingly and watch for digestive issues.', portion: 'Small cubes rarely', warning: 'Watch for digestive upset' },
      { name: 'bread', status: 'caution', emoji: 'üçû', note: 'Plain bread in small amounts is okay. No nutritional value. Avoid raw dough!', portion: 'Small pieces occasionally', warning: 'Raw dough is dangerous' },
      { name: 'tomato', status: 'caution', emoji: 'üçÖ', note: 'Ripe tomatoes only. Green parts and unripe tomatoes contain solanine.', portion: 'Ripe flesh only', warning: 'Avoid stems and leaves' },
      { name: 'tomatoes', status: 'caution', emoji: 'üçÖ', note: 'Ripe tomatoes only. Green parts and unripe tomatoes contain solanine.', portion: 'Ripe flesh only', warning: 'Avoid stems and leaves' },
      { name: 'milk', status: 'caution', emoji: 'ü•õ', note: 'Many dogs are lactose intolerant. Can cause digestive upset.', portion: 'Very small amounts', warning: 'May cause diarrhea' },
      { name: 'popcorn', status: 'caution', emoji: 'üçø', note: 'Plain, air-popped only. No butter, salt, or seasonings.', portion: 'A few pieces', warning: 'Kernels can be choking hazard' },
      { name: 'shrimp', status: 'caution', emoji: 'ü¶ê', note: 'Fully cooked and cleaned. Remove shell, tail, and veins.', portion: 'Occasional treat', warning: 'Some dogs have shellfish allergies' },
      { name: 'pineapple', status: 'caution', emoji: 'üçç', note: 'Fresh only, remove skin and core. High in sugar.', portion: 'Small chunks rarely', warning: 'Too much causes upset stomach' },
      { name: 'coconut', status: 'caution', emoji: 'ü••', note: 'Flesh is okay in small amounts. Oil can cause loose stools.', portion: 'Small pieces', warning: 'High in fat' },
      { name: 'honey', status: 'caution', emoji: 'üçØ', note: 'Small amounts okay. High in sugar, not for diabetic or overweight dogs.', portion: 'Tiny amounts', warning: 'Not for puppies' },
      { name: 'cashews', status: 'caution', emoji: 'ü•ú', note: 'Unsalted only. High in fat, can cause pancreatitis if too many.', portion: 'A few nuts rarely', warning: 'High fat content' },
      { name: 'almonds', status: 'caution', emoji: 'ü•ú', note: 'Not toxic but hard to digest. Can cause choking or blockages.', portion: 'Avoid if possible', warning: 'Choking hazard, hard to digest' },
      { name: 'yogurt', status: 'caution', emoji: 'ü•õ', note: 'Plain, unsweetened only. Contains probiotics. Check for xylitol!', portion: 'Small spoonful', warning: 'Avoid sweetened varieties' },
      { name: 'bacon', status: 'caution', emoji: 'ü•ì', note: 'Very high in fat and sodium. Can cause pancreatitis.', portion: 'Tiny piece rarely', warning: 'High fat, risk of pancreatitis' },
      { name: 'ham', status: 'caution', emoji: 'üçñ', note: 'High in sodium. Can cause excessive thirst and pancreatitis.', portion: 'Very small pieces', warning: 'High sodium content' },
      { name: 'corn', status: 'caution', emoji: 'üåΩ', note: 'Kernels are safe. Never give corn on the cob - choking hazard!', portion: 'Kernels off the cob', warning: 'Cob is dangerous' },
      { name: 'potato', status: 'caution', emoji: 'ü•î', note: 'Cooked plain only. Raw or green potatoes are toxic.', portion: 'Small cooked pieces', warning: 'Never raw or green' },
      { name: 'potatoes', status: 'caution', emoji: 'ü•î', note: 'Cooked plain only. Raw or green potatoes are toxic.', portion: 'Small cooked pieces', warning: 'Never raw or green' },
      { name: 'hot dog', status: 'caution', emoji: 'üå≠', note: 'High in sodium and preservatives. Not ideal but not toxic.', portion: 'Small pieces for training', warning: 'High sodium content' },
      { name: 'ice cream', status: 'caution', emoji: 'üç¶', note: 'High in sugar and dairy. Many dogs are lactose intolerant.', portion: 'Tiny taste rarely', warning: 'Check for xylitol in sugar-free' },
      { name: 'french fries', status: 'caution', emoji: 'üçü', note: 'High in salt and fat. Plain, unsalted occasionally okay.', portion: 'One or two plain', warning: 'Very unhealthy choice' },
      { name: 'pizza', status: 'caution', emoji: 'üçï', note: 'Crust only if plain. Toppings often unsafe. High in sodium.', portion: 'Small plain crust piece', warning: 'Watch toppings carefully' },
      
      // ==================== TOXIC FOODS ====================
      { name: 'grape', status: 'toxic', emoji: 'üçá', note: 'HIGHLY TOXIC! Can cause kidney failure. Even small amounts are dangerous.', danger: 'Kidney failure', action: 'Contact vet immediately if ingested' },
      { name: 'grapes', status: 'toxic', emoji: 'üçá', note: 'HIGHLY TOXIC! Can cause kidney failure. Even small amounts are dangerous.', danger: 'Kidney failure', action: 'Contact vet immediately if ingested' },
      { name: 'raisin', status: 'toxic', emoji: 'üçá', note: 'HIGHLY TOXIC! Even more concentrated than grapes. Extremely dangerous.', danger: 'Kidney failure', action: 'Contact vet immediately if ingested' },
      { name: 'raisins', status: 'toxic', emoji: 'üçá', note: 'HIGHLY TOXIC! Even more concentrated than grapes. Extremely dangerous.', danger: 'Kidney failure', action: 'Contact vet immediately if ingested' },
      { name: 'chocolate', status: 'toxic', emoji: 'üç´', note: 'Contains theobromine. Dark chocolate is most dangerous. Never safe.', danger: 'Heart problems, seizures', action: 'Contact vet - mention type and amount eaten' },
      { name: 'dark chocolate', status: 'toxic', emoji: 'üç´', note: 'EXTREMELY TOXIC! Highest theobromine content. Very dangerous.', danger: 'Seizures, heart failure', action: 'EMERGENCY - Contact vet immediately' },
      { name: 'onion', status: 'toxic', emoji: 'üßÖ', note: 'Damages red blood cells. All forms toxic: raw, cooked, powder.', danger: 'Anemia, organ damage', action: 'Contact vet if more than tiny amount' },
      { name: 'onions', status: 'toxic', emoji: 'üßÖ', note: 'Damages red blood cells. All forms toxic: raw, cooked, powder.', danger: 'Anemia, organ damage', action: 'Contact vet if more than tiny amount' },
      { name: 'garlic', status: 'toxic', emoji: 'üßÑ', note: 'More toxic than onions. Damages red blood cells.', danger: 'Anemia, weakness', action: 'Contact vet - symptoms may be delayed' },
      { name: 'avocado', status: 'toxic', emoji: 'ü•ë', note: 'Contains persin. Pit is also a choking/blockage hazard.', danger: 'Vomiting, diarrhea', action: 'Monitor closely, call vet if symptoms appear' },
      { name: 'xylitol', status: 'toxic', emoji: '‚ö†Ô∏è', note: 'EXTREMELY TOXIC! Found in sugar-free products. Causes rapid insulin release.', danger: 'Liver failure, death', action: 'EMERGENCY - Contact vet immediately' },
      { name: 'macadamia', status: 'toxic', emoji: 'ü•ú', note: 'Causes weakness, vomiting, tremors. Toxic mechanism unknown.', danger: 'Weakness, hyperthermia', action: 'Contact vet - usually recoverable' },
      { name: 'macadamia nuts', status: 'toxic', emoji: 'ü•ú', note: 'Causes weakness, vomiting, tremors. Toxic mechanism unknown.', danger: 'Weakness, hyperthermia', action: 'Contact vet - usually recoverable' },
      { name: 'alcohol', status: 'toxic', emoji: 'üç∫', note: 'Even small amounts dangerous. Dogs cannot metabolize alcohol.', danger: 'Vomiting, breathing problems, coma', action: 'Contact vet immediately' },
      { name: 'beer', status: 'toxic', emoji: 'üç∫', note: 'Contains alcohol and often hops. Both are toxic to dogs.', danger: 'Alcohol poisoning', action: 'Contact vet immediately' },
      { name: 'wine', status: 'toxic', emoji: 'üç∑', note: 'Alcohol is toxic. Grapes in wine make it doubly dangerous.', danger: 'Alcohol + grape toxicity', action: 'Contact vet immediately' },
      { name: 'coffee', status: 'toxic', emoji: '‚òï', note: 'Caffeine is toxic. Includes coffee beans and grounds.', danger: 'Hyperactivity, seizures, heart issues', action: 'Contact vet - mention amount consumed' },
      { name: 'caffeine', status: 'toxic', emoji: '‚òï', note: 'Found in coffee, tea, energy drinks. Very dangerous.', danger: 'Heart palpitations, seizures', action: 'Contact vet immediately' },
      { name: 'tea', status: 'toxic', emoji: 'üçµ', note: 'Contains caffeine. Some herbal teas may also be harmful.', danger: 'Caffeine toxicity', action: 'Contact vet if significant amount' },
      { name: 'mushroom', status: 'toxic', emoji: 'üçÑ', note: 'Wild mushrooms can be deadly. Store-bought plain ones may be okay.', danger: 'Organ failure, death (wild)', action: 'If wild mushroom, emergency vet visit' },
      { name: 'mushrooms', status: 'toxic', emoji: 'üçÑ', note: 'Wild mushrooms extremely dangerous. Assume toxic if unknown.', danger: 'Organ failure, death', action: 'EMERGENCY if wild - contact vet' },
      { name: 'nutmeg', status: 'toxic', emoji: 'ü´ö', note: 'Contains myristicin. Can cause hallucinations and high heart rate.', danger: 'Seizures, disorientation', action: 'Contact vet if significant amount' },
      { name: 'cherry', status: 'toxic', emoji: 'üçí', note: 'Pits, stems, and leaves contain cyanide. Flesh alone in tiny amounts may be okay.', danger: 'Cyanide poisoning', action: 'Contact vet if pit ingested' },
      { name: 'cherries', status: 'toxic', emoji: 'üçí', note: 'Pits, stems, and leaves contain cyanide. Flesh alone in tiny amounts may be okay.', danger: 'Cyanide poisoning', action: 'Contact vet if pit ingested' },
      { name: 'peach', status: 'toxic', emoji: 'üçë', note: 'Pit contains cyanide and is a choking hazard. Flesh is okay without pit.', danger: 'Cyanide, intestinal blockage', action: 'Contact vet if pit swallowed' },
      { name: 'plum', status: 'toxic', emoji: 'ü´ê', note: 'Pit is toxic and dangerous. Flesh without pit is okay in small amounts.', danger: 'Cyanide, intestinal blockage', action: 'Contact vet if pit swallowed' },
      { name: 'raw yeast dough', status: 'toxic', emoji: 'üçû', note: 'Expands in stomach. Produces alcohol as it rises.', danger: 'Bloat, alcohol poisoning', action: 'EMERGENCY - Contact vet immediately' },
      { name: 'bread dough', status: 'toxic', emoji: 'üçû', note: 'Raw dough expands and produces alcohol. Very dangerous.', danger: 'Stomach expansion, alcohol', action: 'EMERGENCY - Contact vet immediately' },
      { name: 'cooked bones', status: 'toxic', emoji: 'ü¶¥', note: 'Splinter easily. Can puncture digestive tract.', danger: 'Internal punctures, blockage', action: 'EMERGENCY if choking or distress' },
      { name: 'chicken bones', status: 'toxic', emoji: 'ü¶¥', note: 'Cooked bones splinter. Can cause choking or internal injury.', danger: 'Choking, internal punctures', action: 'Monitor closely, vet if symptoms' },
      { name: 'candy', status: 'toxic', emoji: 'üç¨', note: 'Often contains xylitol or chocolate. Always check ingredients.', danger: 'Xylitol/chocolate toxicity', action: 'Check ingredients, call vet if xylitol' },
      { name: 'gum', status: 'toxic', emoji: 'üç¨', note: 'Most contain xylitol. Extremely dangerous.', danger: 'Xylitol toxicity', action: 'EMERGENCY - Contact vet immediately' },
      { name: 'chewing gum', status: 'toxic', emoji: 'üç¨', note: 'Usually contains xylitol. Very toxic to dogs.', danger: 'Liver failure, seizures', action: 'EMERGENCY - Contact vet immediately' },
    ];

    // Status configuration
    const statusConfig = {
      safe: {
        bg: 'bg-emerald-50',
        border: 'border-emerald-200',
        icon: '‚úì',
        iconBg: 'bg-emerald-500',
        title: 'Safe for Dogs',
        titleColor: 'text-emerald-700',
        badge: 'bg-emerald-100 text-emerald-700'
      },
      caution: {
        bg: 'bg-amber-50',
        border: 'border-amber-200',
        icon: '!',
        iconBg: 'bg-amber-500',
        title: 'Use Caution',
        titleColor: 'text-amber-700',
        badge: 'bg-amber-100 text-amber-700'
      },
      toxic: {
        bg: 'bg-red-50',
        border: 'border-red-200',
        icon: '‚úï',
        iconBg: 'bg-red-500',
        title: 'Toxic - Do Not Feed',
        titleColor: 'text-red-700',
        badge: 'bg-red-100 text-red-700'
      }
    };

    function App() {
      const [searchQuery, setSearchQuery] = useState('');
      const [selectedFood, setSelectedFood] = useState(null);
      const [recentSearches, setRecentSearches] = useState([]);
      const [showProfileModal, setShowProfileModal] = useState(false);
      const [showInstallModal, setShowInstallModal] = useState(false);
      const [editingDogIndex, setEditingDogIndex] = useState(null);
      const [dogProfiles, setDogProfiles] = useState(() => {
        const saved = localStorage.getItem('sniffsnax_dogProfiles');
        return saved ? JSON.parse(saved) : [];
      });
      const [activeDogIndex, setActiveDogIndex] = useState(() => {
        const saved = localStorage.getItem('sniffsnax_activeDogIndex');
        return saved ? parseInt(saved) : 0;
      });

      useEffect(() => {
        localStorage.setItem('sniffsnax_dogProfiles', JSON.stringify(dogProfiles));
      }, [dogProfiles]);

      useEffect(() => {
        localStorage.setItem('sniffsnax_activeDogIndex', activeDogIndex.toString());
      }, [activeDogIndex]);

      // Hide splash screen
      useEffect(() => {
        const splash = document.getElementById('splash');
        if (splash) {
          setTimeout(() => splash.classList.add('hidden'), 500);
        }
      }, []);

      const activeDog = dogProfiles.length > 0 ? dogProfiles[activeDogIndex] || dogProfiles[0] : null;
      const sizeCategory = activeDog?.weight ? getDogSizeCategory(activeDog.weight) : null;

      const handleSaveDog = (profile) => {
        if (editingDogIndex !== null) {
          setDogProfiles(prev => prev.map((p, i) => i === editingDogIndex ? profile : p));
        } else {
          setDogProfiles(prev => [...prev, profile]);
          setActiveDogIndex(dogProfiles.length);
        }
        setShowProfileModal(false);
        setEditingDogIndex(null);
      };

      const handleDeleteDog = (index) => {
        setDogProfiles(prev => prev.filter((_, i) => i !== index));
        if (activeDogIndex >= dogProfiles.length - 1) {
          setActiveDogIndex(Math.max(0, dogProfiles.length - 2));
        }
        setShowProfileModal(false);
        setEditingDogIndex(null);
      };

      const openAddDog = () => {
        setEditingDogIndex(null);
        setShowProfileModal(true);
      };

      const openEditDog = (index) => {
        setEditingDogIndex(index);
        setShowProfileModal(true);
      };

      const searchResults = useMemo(() => {
        if (!searchQuery.trim()) return [];
        const query = searchQuery.toLowerCase().trim();
        return foodDatabase.filter(food => 
          food.name.toLowerCase().includes(query)
        ).slice(0, 5);
      }, [searchQuery]);

      const selectFood = (food) => {
        setSelectedFood(food);
        setSearchQuery('');
        setRecentSearches(prev => {
          const filtered = prev.filter(f => f.name !== food.name);
          return [food, ...filtered].slice(0, 5);
        });
      };

      const clearSelection = () => {
        setSelectedFood(null);
      };

      return (
        <div className="min-h-screen bg-slate-50">
          {/* Header */}
          <header className="bg-white border-b border-slate-200 sticky top-0 z-10">
            <div className="max-w-lg mx-auto px-4 py-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-3">
                  <span className="text-3xl">üêï</span>
                  <div>
                    <h1 className="text-xl font-bold text-slate-800">SniffSnax</h1>
                    <p className="text-sm text-slate-500">
                      {activeDog ? `Checking for ${activeDog.name}` : 'Can my dog eat this?'}
                    </p>
                  </div>
                </div>
                
                <div className="flex items-center gap-2">
                  <button
                    onClick={() => setShowInstallModal(true)}
                    className="p-2 rounded-full bg-amber-100 text-amber-600 hover:bg-amber-200 transition-colors"
                    title="Install app"
                  >
                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                    </svg>
                  </button>
                  <button
                    onClick={openAddDog}
                    className="p-2 rounded-full bg-slate-100 text-slate-500 hover:bg-slate-200 transition-colors"
                    title="Add another dog"
                  >
                    <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
                    </svg>
                  </button>
                </div>
              </div>
              
              {dogProfiles.length > 0 && (
                <div className="mt-3 flex items-center gap-2 overflow-x-auto pb-1 -mx-4 px-4 scrollbar-hide">
                  {dogProfiles.map((dog, index) => {
                    const isActive = index === activeDogIndex;
                    const dogSize = getDogSizeCategory(dog.weight);
                    return (
                      <button
                        key={index}
                        onClick={() => setActiveDogIndex(index)}
                        className={`flex-shrink-0 flex items-center gap-2 px-3 py-2 rounded-full transition-all ${
                          isActive 
                            ? 'bg-blue-500 text-white shadow-md' 
                            : 'bg-slate-100 text-slate-600 hover:bg-slate-200'
                        }`}
                      >
                        <div className={`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${
                          isActive ? 'bg-white/20' : 'bg-white'
                        }`}>
                          {dog.name.charAt(0).toUpperCase()}
                        </div>
                        <span className="text-sm font-medium">{dog.name}</span>
                        {isActive && dogSize && (
                          <span className="text-xs bg-white/20 px-1.5 py-0.5 rounded">
                            {dog.weight}kg
                          </span>
                        )}
                      </button>
                    );
                  })}
                  
                  {dogProfiles.length > 0 && dogProfiles.length < 5 && (
                    <button
                      onClick={openAddDog}
                      className="flex-shrink-0 w-8 h-8 rounded-full bg-slate-100 text-slate-400 hover:bg-slate-200 hover:text-slate-600 flex items-center justify-center transition-colors"
                      title="Add another dog"
                    >
                      <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
                      </svg>
                    </button>
                  )}
                </div>
              )}
              
              {activeDog && sizeCategory && (
                <button 
                  onClick={() => openEditDog(activeDogIndex)}
                  className="mt-2 flex flex-wrap items-center gap-2 hover:opacity-70 transition-opacity"
                >
                  <span className={`px-2 py-1 rounded-full text-xs font-medium ${sizeCategory.bg} ${sizeCategory.color}`}>
                    {sizeCategory.emoji} {sizeCategory.label} ‚Ä¢ {activeDog.weight}kg
                  </span>
                  {activeDog.breed && (
                    <span className="px-2 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-600">
                      {activeDog.breed}
                    </span>
                  )}
                  {activeDog.considerations?.slice(0, 2).map(id => {
                    const item = specialConsiderations.find(c => c.id === id);
                    return item ? (
                      <span key={id} className="px-2 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-600">
                        {item.emoji} {item.label}
                      </span>
                    ) : null;
                  })}
                  <svg className="w-3 h-3 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                  </svg>
                </button>
              )}
            </div>
          </header>

          {showProfileModal && (
            <DogProfileModal
              profile={editingDogIndex !== null ? dogProfiles[editingDogIndex] : null}
              onSave={handleSaveDog}
              onDelete={editingDogIndex !== null ? () => handleDeleteDog(editingDogIndex) : null}
              onClose={() => {
                setShowProfileModal(false);
                setEditingDogIndex(null);
              }}
              isEditing={editingDogIndex !== null}
              dogCount={dogProfiles.length}
            />
          )}

          {showInstallModal && (
            <InstallModal onClose={() => setShowInstallModal(false)} />
          )}

          <main className="max-w-lg mx-auto px-4 py-6">
            {/* Search */}
            <div className="relative mb-6">
              <div className="relative">
                <input
                  type="text"
                  value={searchQuery}
                  onChange={(e) => setSearchQuery(e.target.value)}
                  placeholder="Search any food..."
                  className="w-full px-4 py-4 pl-12 text-lg rounded-2xl border-2 border-slate-200 focus:border-blue-400 focus:outline-none transition-colors bg-white shadow-sm"
                />
                <svg className="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
                {searchQuery && (
                  <button 
                    onClick={() => setSearchQuery('')}
                    className="absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600"
                  >
                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </button>
                )}
              </div>

              {searchResults.length > 0 && (
                <div className="absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden z-20">
                  {searchResults.map((food, index) => {
                    const config = statusConfig[food.status];
                    return (
                      <button
                        key={index}
                        onClick={() => selectFood(food)}
                        className="w-full px-4 py-3 flex items-center gap-3 hover:bg-slate-50 transition-colors border-b border-slate-100 last:border-0"
                      >
                        <span className="text-2xl">{food.emoji}</span>
                        <span className="flex-1 text-left font-medium text-slate-700 capitalize">{food.name}</span>
                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${config.badge}`}>
                          {food.status}
                        </span>
                      </button>
                    );
                  })}
                </div>
              )}

              {searchQuery && searchResults.length === 0 && (
                <div className="absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-lg border border-slate-200 p-4 text-center">
                  <p className="text-slate-500">No results for "{searchQuery}"</p>
                  <p className="text-sm text-slate-400 mt-1">Try a different search</p>
                </div>
              )}
            </div>

            {/* Selected Food */}
            {selectedFood && (
              <div className="mb-6">
                <FoodResult food={selectedFood} onClose={clearSelection} dogProfile={activeDog} />
              </div>
            )}

            {/* Recent */}
            {!selectedFood && recentSearches.length > 0 && (
              <div className="mb-6">
                <h2 className="text-sm font-medium text-slate-500 mb-3">Recent Searches</h2>
                <div className="flex flex-wrap gap-2">
                  {recentSearches.map((food, index) => {
                    const config = statusConfig[food.status];
                    return (
                      <button
                        key={index}
                        onClick={() => selectFood(food)}
                        className={`px-3 py-2 rounded-full flex items-center gap-2 ${config.bg} ${config.border} border transition-transform hover:scale-105`}
                      >
                        <span>{food.emoji}</span>
                        <span className="capitalize text-sm font-medium text-slate-700">{food.name}</span>
                      </button>
                    );
                  })}
                </div>
              </div>
            )}

            {/* Add Dog Prompt */}
            {!selectedFood && dogProfiles.length === 0 && (
              <div className="mb-6">
                <button
                  onClick={openAddDog}
                  className="w-full bg-gradient-to-r from-amber-50 to-orange-50 border-2 border-dashed border-amber-200 rounded-2xl p-4 flex items-center gap-4 hover:border-amber-300 transition-colors"
                >
                  <div className="w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center text-2xl">
                    üêï
                  </div>
                  <div className="flex-1 text-left">
                    <h3 className="font-semibold text-slate-800">Add your dog's profile</h3>
                    <p className="text-sm text-slate-500">Get personalized portion sizes</p>
                  </div>
                  <svg className="w-5 h-5 text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                  </svg>
                </button>
              </div>
            )}

            {/* Quick Reference */}
            {!selectedFood && (
              <div className="space-y-4">
                <h2 className="text-sm font-medium text-slate-500">Quick Reference</h2>
                
                <div className="bg-white rounded-2xl p-4 border border-slate-200">
                  <div className="flex items-center gap-2 mb-3">
                    <span className="w-6 h-6 rounded-full bg-emerald-500 flex items-center justify-center text-white text-sm font-bold">‚úì</span>
                    <h3 className="font-semibold text-slate-700">Safe Foods</h3>
                  </div>
                  <div className="flex flex-wrap gap-2">
                    {foodDatabase.filter(f => f.status === 'safe').slice(0, 8).map((food, i) => (
                      <button 
                        key={i}
                        onClick={() => selectFood(food)}
                        className="px-3 py-1.5 bg-emerald-50 rounded-full text-sm text-emerald-700 hover:bg-emerald-100 transition-colors"
                      >
                        {food.emoji} {food.name}
                      </button>
                    ))}
                  </div>
                </div>

                <div className="bg-white rounded-2xl p-4 border border-slate-200">
                  <div className="flex items-center gap-2 mb-3">
                    <span className="w-6 h-6 rounded-full bg-red-500 flex items-center justify-center text-white text-sm font-bold">‚úï</span>
                    <h3 className="font-semibold text-slate-700">Never Feed</h3>
                  </div>
                  <div className="flex flex-wrap gap-2">
                    {foodDatabase.filter(f => f.status === 'toxic').slice(0, 8).map((food, i) => (
                      <button 
                        key={i}
                        onClick={() => selectFood(food)}
                        className="px-3 py-1.5 bg-red-50 rounded-full text-sm text-red-700 hover:bg-red-100 transition-colors"
                      >
                        {food.emoji} {food.name}
                      </button>
                    ))}
                  </div>
                </div>
              </div>
            )}

            {/* Emergency */}
            <div className="mt-6 bg-gradient-to-r from-blue-500 to-blue-600 rounded-2xl p-4 text-white">
              <div className="flex items-start gap-3">
                <span className="text-2xl">üö®</span>
                <div>
                  <h3 className="font-semibold">Emergency?</h3>
                  <p className="text-sm text-blue-100 mt-1">If your dog ate something toxic, contact your vet immediately.</p>
                  <a href="tel:" className="mt-3 inline-block bg-white text-blue-600 px-4 py-2 rounded-full text-sm font-semibold hover:bg-blue-50 transition-colors">
                    Find Emergency Vet
                  </a>
                </div>
              </div>
            </div>
          </main>

          <footer className="max-w-lg mx-auto px-4 py-6 text-center safe-area-inset-bottom">
            <p className="text-sm text-slate-500 mb-3">Made with ‚ù§Ô∏è for dog lovers everywhere.</p>
            <a 
              href="https://buymeacoffee.com/hannahmilan" 
              target="_blank" 
              rel="noopener noreferrer"
              className="inline-flex items-center gap-2 px-4 py-2 bg-amber-400 hover:bg-amber-500 text-amber-900 font-medium rounded-full text-sm transition-colors"
            >
              ‚òï Buy me a coffee
            </a>
            <p className="text-xs text-slate-400 mt-4">Always consult your vet for specific dietary advice.</p>
            <p className="text-xs text-slate-300 mt-1">SniffSnax v1.0</p>
          </footer>

          <style>{`
            @keyframes fadeIn {
              from { opacity: 0; transform: translateY(-10px); }
              to { opacity: 1; transform: translateY(0); }
            }
            .animate-fadeIn { animation: fadeIn 0.3s ease-out; }
            .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
            .scrollbar-hide::-webkit-scrollbar { display: none; }
          `}</style>
        </div>
      );
    }

    // Food Result Component
    function FoodResult({ food, onClose, dogProfile }) {
      const config = statusConfig[food.status];
      const portionInfo = dogProfile?.weight ? getPortionBySize(food.portion, dogProfile.weight) : null;
      const considerationTips = dogProfile?.considerations 
        ? getFoodTipsForConsiderations(dogProfile.considerations, food.status)
        : [];
      
      return (
        <div className={`rounded-2xl border-2 ${config.border} ${config.bg} overflow-hidden animate-fadeIn`}>
          <div className="p-4 flex items-center justify-between">
            <div className="flex items-center gap-3">
              <span className="text-4xl">{food.emoji}</span>
              <div>
                <h2 className="text-xl font-bold text-slate-800 capitalize">{food.name}</h2>
                <div className="flex items-center gap-2 mt-1">
                  <span className={`w-5 h-5 rounded-full ${config.iconBg} flex items-center justify-center text-white text-xs font-bold`}>
                    {config.icon}
                  </span>
                  <span className={`font-semibold ${config.titleColor}`}>{config.title}</span>
                </div>
              </div>
            </div>
            <button onClick={onClose} className="p-2 hover:bg-white/50 rounded-full transition-colors">
              <svg className="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>

          <div className="px-4 pb-4 space-y-3">
            <div className="bg-white/60 rounded-xl p-3">
              <p className="text-slate-600">{food.note}</p>
            </div>

            {considerationTips.length > 0 && (
              <div className="bg-blue-100 rounded-xl p-3">
                <p className="text-xs text-blue-600 uppercase tracking-wide mb-2 font-medium">
                  üí° For {dogProfile.name}
                </p>
                <ul className="space-y-1">
                  {considerationTips.map((tip, index) => (
                    <li key={index} className="text-sm text-blue-800 flex items-start gap-2">
                      <span className="text-blue-400">‚Ä¢</span>
                      <span>{tip}</span>
                    </li>
                  ))}
                </ul>
              </div>
            )}

            {food.status === 'safe' && food.portion && (
              <div className="bg-white/60 rounded-xl p-3">
                <p className="text-xs text-slate-500 uppercase tracking-wide mb-1">
                  {dogProfile ? `Portion for ${dogProfile.name}` : 'Recommended Portion'}
                </p>
                <p className="text-slate-700 font-medium">{food.portion}</p>
              </div>
            )}

            {food.status === 'caution' && food.warning && (
              <div className="bg-amber-100 rounded-xl p-3 flex items-start gap-2">
                <span className="text-amber-600">‚ö†Ô∏è</span>
                <p className="text-amber-800 font-medium">{food.warning}</p>
              </div>
            )}

            {food.status === 'toxic' && (
              <>
                {food.danger && (
                  <div className="bg-red-100 rounded-xl p-3">
                    <p className="text-xs text-red-500 uppercase tracking-wide mb-1">Potential Danger</p>
                    <p className="text-red-700 font-semibold">{food.danger}</p>
                  </div>
                )}
                {food.action && (
                  <div className="bg-white rounded-xl p-3 border-2 border-red-300">
                    <p className="text-xs text-slate-500 uppercase tracking-wide mb-1">What To Do</p>
                    <p className="text-slate-800 font-semibold">{food.action}</p>
                    {dogProfile && (
                      <p className="text-xs text-red-600 mt-2">
                        üí° Tell the vet that {dogProfile.name} weighs {dogProfile.weight}kg
                      </p>
                    )}
                  </div>
                )}
              </>
            )}
          </div>
        </div>
      );
    }

    // Dog Profile Modal
    function DogProfileModal({ profile, onSave, onDelete, onClose, isEditing, dogCount }) {
      const [name, setName] = useState(profile?.name || '');
      const [weight, setWeight] = useState(profile?.weight || '');
      const [breed, setBreed] = useState(profile?.breed || '');
      const [considerations, setConsiderations] = useState(profile?.considerations || []);
      const [showBreedList, setShowBreedList] = useState(false);

      const handleSave = () => {
        if (!name.trim() || !weight) return;
        onSave({ name: name.trim(), weight: parseFloat(weight), breed: breed.trim(), considerations });
      };

      const toggleConsideration = (id) => {
        setConsiderations(prev => prev.includes(id) ? prev.filter(c => c !== id) : [...prev, id]);
      };

      const sizePreview = weight ? getDogSizeCategory(parseFloat(weight)) : null;

      return (
        <div className="fixed inset-0 z-50 overflow-y-auto bg-black/50 backdrop-blur-sm">
          <div className="min-h-full flex items-end sm:items-center justify-center p-0 sm:p-4">
            <div className="relative bg-white w-full max-w-lg rounded-t-3xl sm:rounded-3xl shadow-xl">
              <div className="sm:hidden flex justify-center pt-3">
                <div className="w-10 h-1 bg-slate-300 rounded-full" />
              </div>
              
              <div className="px-4 pt-2 pb-3">
                <div className="flex items-center justify-between">
                  <h2 className="text-xl font-bold text-slate-800">
                    {isEditing ? `Edit ${profile?.name}` : 'Add a Dog'}
                  </h2>
                  <button onClick={onClose} className="p-2 hover:bg-slate-100 rounded-full transition-colors">
                    <svg className="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </button>
                </div>
              </div>

              <div className="px-4 pb-4 space-y-4 max-h-[70vh] overflow-y-auto">
                <div className="flex justify-center">
                  <div className="w-20 h-20 rounded-full bg-gradient-to-br from-amber-100 to-orange-100 flex items-center justify-center border-4 border-white shadow-lg">
                    {name ? (
                      <span className="text-2xl font-bold text-amber-600">{name.charAt(0).toUpperCase()}</span>
                    ) : (
                      <span className="text-3xl">üêï</span>
                    )}
                  </div>
                </div>

                <div>
                  <label className="block text-sm font-medium text-slate-700 mb-1">Dog's Name *</label>
                  <input
                    type="text"
                    value={name}
                    onChange={(e) => setName(e.target.value)}
                    placeholder="e.g., Max, Bella"
                    autoFocus
                    className="w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-blue-400 focus:outline-none text-base"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-slate-700 mb-1">Weight (kg) *</label>
                  <div className="relative">
                    <input
                      type="number"
                      value={weight}
                      onChange={(e) => setWeight(e.target.value)}
                      placeholder="e.g., 15"
                      min="0.5"
                      max="100"
                      step="0.5"
                      className="w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-blue-400 focus:outline-none text-base"
                    />
                    <span className="absolute right-4 top-1/2 -translate-y-1/2 text-slate-400">kg</span>
                  </div>
                  {sizePreview && (
                    <div className={`mt-2 px-3 py-2 rounded-lg ${sizePreview.bg} flex items-center gap-2`}>
                      <span>{sizePreview.emoji}</span>
                      <span className={`text-sm font-medium ${sizePreview.color}`}>{sizePreview.label} sized dog</span>
                    </div>
                  )}
                </div>

                <div>
                  <label className="block text-sm font-medium text-slate-700 mb-1">Breed <span className="text-slate-400">(optional)</span></label>
                  <input
                    type="text"
                    value={breed}
                    onChange={(e) => setBreed(e.target.value)}
                    onFocus={() => setShowBreedList(true)}
                    onBlur={() => setTimeout(() => setShowBreedList(false), 200)}
                    placeholder="e.g., Golden Retriever"
                    className="w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-blue-400 focus:outline-none text-base"
                  />
                  {showBreedList && (
                    <div className="mt-2 flex flex-wrap gap-2">
                      {popularBreeds.filter(b => !breed || b.toLowerCase().includes(breed.toLowerCase())).slice(0, 6).map((b, i) => (
                        <button key={i} onMouseDown={() => setBreed(b)} className="px-3 py-1.5 bg-slate-100 hover:bg-slate-200 rounded-full text-sm text-slate-700">
                          {b}
                        </button>
                      ))}
                    </div>
                  )}
                </div>

                <div>
                  <label className="block text-sm font-medium text-slate-700 mb-1">Things to know <span className="text-slate-400">(optional)</span></label>
                  <div className="grid grid-cols-2 gap-2">
                    {specialConsiderations.map((item) => {
                      const isSelected = considerations.includes(item.id);
                      return (
                        <button
                          key={item.id}
                          type="button"
                          onClick={() => toggleConsideration(item.id)}
                          className={`p-2.5 rounded-xl border-2 text-left transition-all ${isSelected ? 'border-blue-400 bg-blue-50' : 'border-slate-200 hover:border-slate-300 bg-white'}`}
                        >
                          <div className="flex items-center gap-2">
                            <span className="text-base">{item.emoji}</span>
                            <span className={`text-xs font-medium ${isSelected ? 'text-blue-700' : 'text-slate-700'}`}>{item.label}</span>
                          </div>
                        </button>
                      );
                    })}
                  </div>
                </div>

                <div className="pt-2 space-y-2">
                  <button
                    onClick={handleSave}
                    disabled={!name.trim() || !weight}
                    className="w-full py-3 bg-blue-500 text-white font-semibold rounded-xl hover:bg-blue-600 transition-colors disabled:bg-slate-300 disabled:cursor-not-allowed"
                  >
                    {isEditing ? 'Save Changes' : 'Add Dog'}
                  </button>
                  
                  {isEditing && onDelete && (
                    <button onClick={onDelete} className="w-full py-3 text-red-500 font-medium rounded-xl hover:bg-red-50 transition-colors">
                      Remove {profile?.name}
                    </button>
                  )}
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    }

    // Render app
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);

    // Install Modal Component
    function InstallModal({ onClose }) {
      const [device, setDevice] = useState(() => {
        const ua = navigator.userAgent;
        if (/iPad|iPhone|iPod/.test(ua)) return 'ios';
        if (/Android/.test(ua)) return 'android';
        return 'desktop';
      });

      return (
        <div className="fixed inset-0 z-50 overflow-y-auto bg-black/50 backdrop-blur-sm">
          <div className="min-h-full flex items-end sm:items-center justify-center p-0 sm:p-4">
            <div className="relative bg-white w-full max-w-lg rounded-t-3xl sm:rounded-3xl shadow-xl">
              <div className="sm:hidden flex justify-center pt-3">
                <div className="w-10 h-1 bg-slate-300 rounded-full" />
              </div>
              
              <div className="px-4 pt-2 pb-3">
                <div className="flex items-center justify-between">
                  <h2 className="text-xl font-bold text-slate-800">üì≤ Install SniffSnax</h2>
                  <button onClick={onClose} className="p-2 hover:bg-slate-100 rounded-full transition-colors">
                    <svg className="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </button>
                </div>
                <p className="text-sm text-slate-500 mt-1">Add to your home screen for instant access!</p>
              </div>

              <div className="px-4 pb-6">
                {/* Device Tabs */}
                <div className="flex gap-2 mb-4">
                  <button
                    onClick={() => setDevice('ios')}
                    className={`flex-1 py-2 px-3 rounded-xl font-medium text-sm transition-all ${
                      device === 'ios' ? 'bg-slate-800 text-white' : 'bg-slate-100 text-slate-600 hover:bg-slate-200'
                    }`}
                  >
                    üçé iPhone
                  </button>
                  <button
                    onClick={() => setDevice('android')}
                    className={`flex-1 py-2 px-3 rounded-xl font-medium text-sm transition-all ${
                      device === 'android' ? 'bg-slate-800 text-white' : 'bg-slate-100 text-slate-600 hover:bg-slate-200'
                    }`}
                  >
                    ü§ñ Android
                  </button>
                  <button
                    onClick={() => setDevice('desktop')}
                    className={`flex-1 py-2 px-3 rounded-xl font-medium text-sm transition-all ${
                      device === 'desktop' ? 'bg-slate-800 text-white' : 'bg-slate-100 text-slate-600 hover:bg-slate-200'
                    }`}
                  >
                    üíª Desktop
                  </button>
                </div>

                {/* iOS Instructions */}
                {device === 'ios' && (
                  <div className="space-y-3">
                    <div className="flex items-start gap-3 p-3 bg-blue-50 rounded-xl">
                      <span className="w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0">1</span>
                      <div>
                        <p className="font-medium text-slate-800">Open in Safari</p>
                        <p className="text-sm text-slate-500">This must be done in Safari, not Chrome</p>
                      </div>
                    </div>
                    <div className="flex items-start gap-3 p-3 bg-blue-50 rounded-xl">
                      <span className="w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0">2</span>
                      <div>
                        <p className="font-medium text-slate-800">Tap the Share button</p>
                        <p className="text-sm text-slate-500">The square with an arrow pointing up ‚¨ÜÔ∏è</p>
                      </div>
                    </div>
                    <div className="flex items-start gap-3 p-3 bg-blue-50 rounded-xl">
                      <span className="w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0">3</span>
                      <div>
                        <p className="font-medium text-slate-800">Tap "Add to Home Screen"</p>
                        <p className="text-sm text-slate-500">Scroll down in the share menu to find it</p>
                      </div>
                    </div>
                    <div className="flex items-start gap-3 p-3 bg-blue-50 rounded-xl">
                      <span className="w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0">4</span>
                      <div>
                        <p className="font-medium text-slate-800">Tap "Add"</p>
                        <p className="text-sm text-slate-500">SniffSnax will appear on your home screen! üéâ</p>
                      </div>
                    </div>
                  </div>
                )}

                {/* Android Instructions */}
                {device === 'android' && (
                  <div className="space-y-3">
                    <div className="flex items-start gap-3 p-3 bg-green-50 rounded-xl">
                      <span className="w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0">1</span>
                      <div>
                        <p className="font-medium text-slate-800">Open in Chrome</p>
                        <p className="text-sm text-slate-500">Works best in Chrome browser</p>
                      </div>
                    </div>
                    <div className="flex items-start gap-3 p-3 bg-green-50 rounded-xl">
                      <span className="w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0">2</span>
                      <div>
                        <p className="font-medium text-slate-800">Tap the menu ‚ãÆ</p>
                        <p className="text-sm text-slate-500">Three dots in the top right corner</p>
                      </div>
                    </div>
                    <div className="flex items-start gap-3 p-3 bg-green-50 rounded-xl">
                      <span className="w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0">3</span>
                      <div>
                        <p className="font-medium text-slate-800">Tap "Install app"</p>
                        <p className="text-sm text-slate-500">Or "Add to Home screen"</p>
                      </div>
                    </div>
                    <div className="flex items-start gap-3 p-3 bg-green-50 rounded-xl">
                      <span className="w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0">4</span>
                      <div>
                        <p className="font-medium text-slate-800">Tap "Install"</p>
                        <p className="text-sm text-slate-500">SniffSnax will appear on your home screen! üéâ</p>
                      </div>
                    </div>
                  </div>
                )}

                {/* Desktop Instructions */}
                {device === 'desktop' && (
                  <div className="space-y-3">
                    <div className="flex items-start gap-3 p-3 bg-purple-50 rounded-xl">
                      <span className="w-6 h-6 bg-purple-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0">1</span>
                      <div>
                        <p className="font-medium text-slate-800">Use Chrome or Edge</p>
                        <p className="text-sm text-slate-500">Safari doesn't support PWA install on desktop</p>
                      </div>
                    </div>
                    <div className="flex items-start gap-3 p-3 bg-purple-50 rounded-xl">
                      <span className="w-6 h-6 bg-purple-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0">2</span>
                      <div>
                        <p className="font-medium text-slate-800">Look for the install icon</p>
                        <p className="text-sm text-slate-500">In the address bar (right side) ‚Äî looks like ‚äï or ‚Üì</p>
                      </div>
                    </div>
                    <div className="flex items-start gap-3 p-3 bg-purple-50 rounded-xl">
                      <span className="w-6 h-6 bg-purple-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0">3</span>
                      <div>
                        <p className="font-medium text-slate-800">Click "Install"</p>
                        <p className="text-sm text-slate-500">SniffSnax will open as a standalone app! üéâ</p>
                      </div>
                    </div>
                  </div>
                )}

                <div className="mt-6 p-4 bg-amber-50 rounded-xl text-center">
                  <p className="text-sm text-amber-800">
                    üì¥ <strong>Works offline!</strong> Once installed, no internet needed.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    }
  </script>

  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js')
          .then(reg => console.log('SW registered'))
          .catch(err => console.log('SW registration failed:', err));
      });
    }
  </script>
</body>
</html>
